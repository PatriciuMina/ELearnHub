{"ast":null,"code":"function poll() {\n  $.ajax({\n    url: \"/messages\",\n    type: \"GET\",\n    data: {\n      after_id: mostRecentMessageId,\n      room_id: roomId\n    },\n    success: function success(data) {\n      // Insert the new HTML at the end of the messages div\n      $('#messages').append(data.html); // Update the most recent message ID\n\n      mostRecentMessageId = data.html ? data.html.match(/data-id=\"(\\d+)\"/)[1] : mostRecentMessageId;\n    },\n    dataType: \"json\",\n    complete: function complete() {\n      // Schedule the next request when the current one's complete\n      setTimeout(poll, 5000); // 5 seconds\n    },\n    timeout: 30000 // 30 seconds\n\n  });\n}\n\n$(document).ready(function () {\n  poll();\n});","map":{"version":3,"names":["poll","$","ajax","url","type","data","after_id","mostRecentMessageId","room_id","roomId","success","append","html","match","dataType","complete","setTimeout","timeout","document","ready"],"sources":["/home/patriciumina/RubymineProjects/lms-app/app/javascript/packs/polling.js"],"sourcesContent":["function poll() {\n    $.ajax({\n        url: \"/messages\",\n        type: \"GET\",\n        data: {\n            after_id: mostRecentMessageId,\n            room_id: roomId\n        },\n        success: function(data) {\n            // Insert the new HTML at the end of the messages div\n            $('#messages').append(data.html);\n\n            // Update the most recent message ID\n            mostRecentMessageId = data.html ? data.html.match(/data-id=\"(\\d+)\"/)[1] : mostRecentMessageId;\n        },\n        dataType: \"json\",\n        complete: function() {\n            // Schedule the next request when the current one's complete\n            setTimeout(poll, 5000); // 5 seconds\n        },\n        timeout: 30000 // 30 seconds\n    });\n}\n\n$(document).ready(function() {\n    poll();\n});"],"mappings":"AAAA,SAASA,IAAT,GAAgB;EACZC,CAAC,CAACC,IAAF,CAAO;IACHC,GAAG,EAAE,WADF;IAEHC,IAAI,EAAE,KAFH;IAGHC,IAAI,EAAE;MACFC,QAAQ,EAAEC,mBADR;MAEFC,OAAO,EAAEC;IAFP,CAHH;IAOHC,OAAO,EAAE,iBAASL,IAAT,EAAe;MACpB;MACAJ,CAAC,CAAC,WAAD,CAAD,CAAeU,MAAf,CAAsBN,IAAI,CAACO,IAA3B,EAFoB,CAIpB;;MACAL,mBAAmB,GAAGF,IAAI,CAACO,IAAL,GAAYP,IAAI,CAACO,IAAL,CAAUC,KAAV,CAAgB,iBAAhB,EAAmC,CAAnC,CAAZ,GAAoDN,mBAA1E;IACH,CAbE;IAcHO,QAAQ,EAAE,MAdP;IAeHC,QAAQ,EAAE,oBAAW;MACjB;MACAC,UAAU,CAAChB,IAAD,EAAO,IAAP,CAAV,CAFiB,CAEO;IAC3B,CAlBE;IAmBHiB,OAAO,EAAE,KAnBN,CAmBY;;EAnBZ,CAAP;AAqBH;;AAEDhB,CAAC,CAACiB,QAAD,CAAD,CAAYC,KAAZ,CAAkB,YAAW;EACzBnB,IAAI;AACP,CAFD"},"metadata":{},"sourceType":"module"}